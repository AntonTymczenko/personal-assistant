// https://t.me/obmenka_ivanofrankivsk

/**
Ğ”Ğ»Ñ Ğ½Ğ°ÑˆĞ¸Ñ… ÑˆĞ°Ğ½Ğ¾Ğ²Ğ½Ğ¸Ñ… Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞ½Ğ¸ĞºÑ–Ğ²-Ğ¼Ğ°Ğ½Ğ´Ñ€Ñ–Ğ²Ğ½Ğ¸ĞºÑ–Ğ² Ğ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒÑ”Ğ¼Ğ¾ ÑĞµÑ€ĞµĞ´Ğ½Ñ Ğ²Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ ĞºĞ°Ğ²Ğ¸ Ñƒ Ğ¼Ñ–ÑÑ‚Ğ°Ñ… ÑĞ²Ñ–Ñ‚Ñƒ!!!

ğŸ”ºĞ’ĞĞ Ğ¢Ğ†Ğ¡Ğ¢Ğ¬ ĞĞ”ĞĞ†Ğ„Ğ‡ â˜•ï¸ Ğ—ĞĞŸĞĞ¨ĞĞĞ‡ ĞšĞĞ’Ğ˜ Ğ£ ĞœĞ†Ğ¡Ğ¢ĞĞ¥ Ğ¡Ğ’Ğ†Ğ¢Ğ£ ĞĞ 04.08.2022ğŸ”»

Ğ’Ğ°ÑˆĞ¸Ğ½Ğ³Ñ‚Ğ¾Ğ½ ğŸ‡ºğŸ‡¸ 
Ğ²Ñ–Ğ´ 38,50 Ğ³Ñ€Ğ½ Ğ´Ğ¾ 40,00 Ğ³Ñ€Ğ½ Ğ·Ğ° Ğ¾Ğ´Ğ½Ñƒ â˜•ï¸  Ğ·Ğ°Ğ¿Ğ°ÑˆĞ½Ğ¾Ñ— ĞºĞ°Ğ²Ğ¸

Ğ‘Ñ€ÑÑÑĞµĞ»ÑŒ ğŸ‡ªğŸ‡º
Ğ²Ñ–Ğ´ 38,60 Ğ³Ñ€Ğ½ Ğ´Ğ¾ 40,60 Ğ³Ñ€Ğ½ Ğ·Ğ° Ğ¾Ğ´Ğ½Ñƒ â˜•ï¸ Ğ·Ğ°Ğ¿Ğ°ÑˆĞ½Ğ¾Ñ— ĞºĞ°Ğ²Ğ¸

Ğ›Ğ¾Ğ½Ğ´Ğ¾Ğ½ ğŸ‡¬ğŸ‡§ 
Ğ²Ñ–Ğ´ 43,00 Ğ³Ñ€Ğ½ Ğ´Ğ¾ 48,00 Ğ³Ñ€Ğ½ Ğ·Ğ° Ğ¾Ğ´Ğ½Ñƒ â˜•ï¸ Ğ·Ğ°Ğ¿Ğ°ÑˆĞ½Ğ¾Ñ— ĞºĞ°Ğ²Ğ¸

Ğ’Ğ°Ñ€ÑˆĞ°Ğ²Ğ° ğŸ‡µğŸ‡±
Ğ²Ñ–Ğ´ 8,00 Ğ³Ñ€Ğ½ Ğ´Ğ¾ 8,60 Ğ³Ñ€Ğ½ Ğ·Ğ° Ğ¾Ğ´Ğ½Ñƒ â˜•ï¸ Ğ·Ğ°Ğ¿Ğ°ÑˆĞ½Ğ¾Ñ— ĞºĞ°Ğ²Ğ¸
                                                                                                                                                                                                                                                                                                                                                                                                                                                   
Ğ£Ğ’ĞĞ“Ğ! Ğ’Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ ĞºĞ°Ğ²Ğ¸ Ğ¼Ğ¾Ğ¶Ğµ Ğ·Ğ¼Ñ–Ğ½ÑĞ²Ğ°Ñ‚Ğ¸ÑÑŒ Ğ¿Ñ€Ğ¾Ñ‚ÑĞ³Ğ¾Ğ¼ Ğ´Ğ½Ñ ÑĞº Ğ² ğŸ“ˆ, Ñ‚Ğ°Ğº Ñ– Ğ² ğŸ“‰ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñƒ.                                                                                                           
 */
const tgChannelRequest = async () => {
  const list = [
    'foo text',
    'bar text',
  ];

  const rates = list.filter(msg => msg.match(/Ğ’ĞĞ Ğ¢Ğ†Ğ¡Ğ¢Ğ¬ ĞĞ”ĞĞ†Ğ„Ğ‡ â˜•ï¸ Ğ—ĞĞŸĞĞ¨ĞĞĞ‡ ĞšĞĞ’Ğ˜ Ğ£ ĞœĞ†Ğ¡Ğ¢ĞĞ¥ Ğ¡Ğ’Ğ†Ğ¢Ğ£ ĞĞ/gm));

  // TODO: finds first, change to last
  const usd = rates.find(msg => msg.match(/ğŸ‡ºğŸ‡¸.*\n\n/gm)) || '';
  const eur = rates.find(msg => msg.match(/ğŸ‡ªğŸ‡º.*\n\n/gm)) || '';
  const [ usdAsk, usdBid ] = usd.match(/\d{1,3},\d{2}/) || [0, 0];
  const [ eurAsk, eurBid ] = usd.match(/\d{1,3},\d{2}/) || [0, 0];

  return {
    usd: { ask: Number(usdAsk), bid: Number(usdBid) },
    eur: { ask: Number(eurAsk), bid: Number(eurBid) },
  };
};

export default tgChannelRequest;
